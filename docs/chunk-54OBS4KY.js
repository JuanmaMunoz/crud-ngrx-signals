import{a as He,b as Ee,f as pe,g as me,j as T,k as Me,n as ze,o as Je,r as ce,s as Qe,v as we}from"./chunk-IGN4WQ4G.js";import{a as B,c as Ke,d as Ye}from"./chunk-7ET5DGF5.js";import{G as A,K as F,L as b,M as V,N as qe,O as Ge,P as x,Q as re,R as je,S as le,T as Xe,U as se,V as W,X as $e,a as Le,c as K,d as ye,e as Ae,k as ne,l as oe,m as g,n as We,p as k,q as Be,t as ae}from"./chunk-OUQYCDTF.js";import{h as P}from"./chunk-GP57ZTZF.js";import{$b as te,Ab as s,Bb as X,Cb as $,Db as Ve,E as xe,Eb as R,H as Y,Ib as c,Kb as D,Qb as Se,Ra as r,Rb as L,Sb as m,Tb as w,Ub as O,Vb as J,Wa as y,Wb as Q,Xb as Z,Y as z,Yb as ee,Zb as Re,_b as Oe,a as v,ac as ie,b as h,eb as f,gc as C,jb as Ue,ka as _,pb as Ne,qa as U,qb as Te,ra as N,sb as I,tb as S,ub as ke,vb as Pe,wb as Fe,xb as l,yb as n,za as u,zb as a}from"./chunk-4GFKV7PG.js";var H=class o{static \u0275fac=function(i){return new(i||o)};static \u0275cmp=f({type:o,selectors:[["app-back-users"]],decls:4,vars:1,consts:[[1,"back-users"],[3,"routerLink"],[1,"bi","bi-arrow-left-short"]],template:function(i,t){i&1&&(n(0,"div",0)(1,"a",1),s(2,"i",2),m(3," Back to users "),a()()),i&2&&(r(),l("routerLink","/users"))},dependencies:[ae,Be],styles:[".back-users[_ngcontent-%COMP%]{position:relative}.back-users[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{color:var(--bs-primary);cursor:pointer;left:0rem;position:absolute;text-decoration:none;top:-1rem}.back-users[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{color:var(--bs-secondary)}"]})};var et=(o,e)=>({"is-invalid":o,"is-valid":e});function tt(o,e){if(o&1){let i=R();n(0,"button",7),c("click",function(){U(i);let p=D();return N(p.reset())}),s(1,"i",8),a()}}function it(o,e){o&1&&(n(0,"span",5),s(1,"i",9),a())}var de=class o{input;userAgent=window.navigator.userAgent;control;ngOnInit(){this.control=this.input().control}reset(){this.control.setValue("")}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=f({type:o,selectors:[["app-input-date"]],inputs:{input:"input"},decls:10,vars:15,consts:[[1,"input-date","mb-3"],[1,"form-label","text-secondary","fw-bold",3,"for"],[1,"input-group"],["onkeydown","return false","lang","en-US","type","date","autocomplete","off",1,"form-control",3,"id","placeholder","formControl","ngClass"],["type","button",1,"btn","btn-outline-secondary"],[1,"input-group-text"],[1,"invalid-feedback"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-x-circle"],[1,"bi","bi-calendar"]],template:function(i,t){i&1&&(n(0,"div",0)(1,"label",1),m(2),a(),n(3,"div",2),s(4,"input",3),I(5,tt,2,0,"button",4),I(6,it,2,0,"span",5),n(7,"div",6),m(8),te(9,"validationErrors"),a()()()),i&2&&(r(),l("for",t.input().label),r(),w(t.input().label),r(2),l("id",t.input().label)("placeholder",t.input().placeholder)("formControl",t.input().control)("ngClass",Oe(12,et,t.input().control.errors,t.input().control.value&&t.input().control.valid)),r(),S(t.input().control.value?5:-1),r(),S(!t.input().control.value&&!t.userAgent.toLocaleLowerCase().includes("firefox")?6:-1),r(2),O(" ",ie(9,9,t.input().control.errors,t.input().validationErrors)," "))},dependencies:[Ae,Le,W,F,V,le,Ke],encapsulation:2})};var fe=class o{input;control;ngOnInit(){this.control=this.input().control,this.control.disable()}increase(){this.control.value<this.input().max&&this.control.setValue(this.control.value+1)}decrease(){this.control.value>this.input().min&&this.control.setValue(this.control.value-1)}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=f({type:o,selectors:[["app-input-number"]],inputs:{input:"input"},decls:9,vars:7,consts:[[1,"input-number","mb-3"],[1,"form-label","text-secondary","fw-bold",3,"for"],[1,"input-group","app-table__pagination__content"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-chevron-left"],["autocomplete","off",1,"form-control",3,"placeholder","formControl","id","min","max"],[1,"bi","bi-chevron-right"]],template:function(i,t){i&1&&(n(0,"div",0)(1,"label",1),m(2),a(),n(3,"div",2)(4,"button",3),c("click",function(){return t.decrease()}),s(5,"i",4),a(),s(6,"input",5),n(7,"button",3),c("click",function(){return t.increase()}),s(8,"i",6),a()()()),i&2&&(r(),l("for",t.input().label),r(),w(t.input().label),r(4),l("placeholder",t.input().placeholder)("formControl",t.input().control)("id",t.input().label)("min",t.input().min)("max",t.input().max))},dependencies:[W,F,V,le],encapsulation:2})};var ge=class o{static \u0275fac=function(i){return new(i||o)};static \u0275cmp=f({type:o,selectors:[["app-img"]],decls:3,vars:0,consts:[[1,"img"],[1,"text-secondary","my-0"],[1,"bi","bi-person-circle"]],template:function(i,t){i&1&&(X(0,"div",0)(1,"h2",1),Ve(2,"i",2),$()())},styles:[".img[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%]{font-size:5rem;line-height:0}"]})};var q=class o{avatar={title:"New User",description:"Insert new user in the system",modeRow:!0};static \u0275fac=function(i){return new(i||o)};static \u0275cmp=f({type:o,selectors:[["app-avatar"]],inputs:{avatar:"avatar"},decls:8,vars:11,consts:[[1,"avatar"],[1,"text-primary"],[1,"text-light"]],template:function(i,t){i&1&&(n(0,"div",0)(1,"div"),s(2,"app-img"),a(),n(3,"div")(4,"h4",1),m(5),a(),n(6,"h5",2),m(7),a()()()),i&2&&(L(t.avatar.modeRow?"text-lg-start text-center":"text-center"),Se("d-lg-flex",t.avatar.modeRow)("align-items-center",t.avatar.modeRow),l("@fadeIn",void 0),r(3),Se("ms-lg-3",t.avatar.modeRow),r(2),w(t.avatar.title),r(2),w(t.avatar.description))},dependencies:[ge],encapsulation:2,data:{animation:[P(500)]}})};function nt(o,e){o&1&&s(0,"span",15)}var G=class o{userDetail;loading;error;actionCancel=new y;actionSave=new y;formUser;nameControl;lastNameControl;emailControl;dateControl;positionControl;salaryControl;coworkerControl;hardworkingControl;knowledgeControl;proactivityControl;productivityControl;validationErrors={required:"The field is required",minlength:"The min length is 2",maxlength:"The max length is 50",emailExist:"The email is already in use.",min:"The min value is 600",max:"The max value is $100,000",email:"The email format is invalid"};infoAvatar={title:"New User",description:"Insert new user in the system",modeRow:!0};inputName=u({type:"text",control:{},placeholder:"Insert name",label:"Name",validationErrors:this.validationErrors,focus:!0});inputLastName=u({type:"text",control:{},placeholder:"Insert lastname",label:"Lastname",validationErrors:this.validationErrors});inputEmail=u({type:"text",control:{},placeholder:"Insert email",label:"Email",validationErrors:this.validationErrors});inputDate=u({type:"text",control:{},placeholder:"Insert date",label:"Incorporation date",validationErrors:this.validationErrors});inputPosition=u({type:"text",control:{},placeholder:"Insert position",label:"Position",validationErrors:this.validationErrors});inputSalary=u({type:"text",control:{},placeholder:"Insert salary",label:"Salary",validationErrors:this.validationErrors,mask:"separator.2"});inputCoworker=u({type:"number",control:{},placeholder:"Insert coworker",label:"Coworker",validationErrors:this.validationErrors,min:1,max:10});inputHardworking=u({type:"number",control:{},placeholder:"Insert hardworking",label:"Hardworking",validationErrors:this.validationErrors,min:1,max:10});inputKnowledge=u({type:"number",control:{},placeholder:"Insert knowledge",label:"Knowledge",validationErrors:this.validationErrors,min:1,max:10});inputProactivity=u({type:"number",control:{},placeholder:"Insert proactivity",label:"Proactivity",validationErrors:this.validationErrors,min:1,max:10});inputProductivity=u({type:"number",control:{},placeholder:"Insert productivity",label:"Productivity",validationErrors:this.validationErrors,min:1,max:10});constructor(){C(()=>{this.error()&&this.error()?.error.code==="USER_EMAIL_ALREADY_EXISTS"&&this.emailControl.setErrors({emailExist:"error"})})}ngOnInit(){this.loadForm(),this.userDetail()&&this.setInfoAvatar(this.userDetail())}loadForm(){this.formUser=new Ge({name:new x(this.userDetail()?.info.name??"",[b.required,b.minLength(2),b.maxLength(50)]),lastName:new x(this.userDetail()?.info.lastName??"",[b.required,b.minLength(2),b.maxLength(50)]),email:new x(this.userDetail()?.info.email??"",[b.required,b.email]),date:new x(this.userDetail()?.info.date?new Date(this.userDetail().info.date).toISOString().split("T")[0]:"",[b.required]),position:new x(this.userDetail()?.info.position??"",[b.required,b.minLength(2),b.maxLength(50)]),salary:new x(this.userDetail()?.info.salary??"",[b.required,b.min(600),b.max(1e5)]),coworker:new x(this.userDetail()?.statistics.coworker??5,[b.required]),hardworking:new x(this.userDetail()?.statistics.hardworking??5,[b.required]),knowledge:new x(this.userDetail()?.statistics.knowledge??5,[b.required]),proactivity:new x(this.userDetail()?.statistics.proactivity??5,[b.required]),productivity:new x(this.userDetail()?.statistics.productivity??5,[b.required])}),this.nameControl=this.formUser.get("name"),this.lastNameControl=this.formUser.get("lastName"),this.emailControl=this.formUser.get("email"),this.dateControl=this.formUser.get("date"),this.positionControl=this.formUser.get("position"),this.salaryControl=this.formUser.get("salary"),this.coworkerControl=this.formUser.get("coworker"),this.hardworkingControl=this.formUser.get("hardworking"),this.knowledgeControl=this.formUser.get("knowledge"),this.proactivityControl=this.formUser.get("proactivity"),this.productivityControl=this.formUser.get("productivity"),this.inputName.update(e=>h(v({},e),{control:this.nameControl})),this.inputLastName.update(e=>h(v({},e),{control:this.lastNameControl})),this.inputEmail.update(e=>h(v({},e),{control:this.emailControl})),this.inputDate.update(e=>h(v({},e),{control:this.dateControl})),this.inputPosition.update(e=>h(v({},e),{control:this.positionControl})),this.inputSalary.update(e=>h(v({},e),{control:this.salaryControl})),this.inputCoworker.update(e=>h(v({},e),{control:this.coworkerControl})),this.inputHardworking.update(e=>h(v({},e),{control:this.hardworkingControl})),this.inputKnowledge.update(e=>h(v({},e),{control:this.knowledgeControl})),this.inputProactivity.update(e=>h(v({},e),{control:this.proactivityControl})),this.inputProductivity.update(e=>h(v({},e),{control:this.productivityControl}))}saveUser(){let e={info:{name:this.nameControl.getRawValue(),lastName:this.lastNameControl.getRawValue(),position:this.positionControl.getRawValue(),date:new Date(this.dateControl.getRawValue()).getTime(),salary:this.salaryControl.getRawValue(),email:this.emailControl.getRawValue()},statistics:{email:this.emailControl.getRawValue(),proactivity:this.proactivityControl.getRawValue(),productivity:this.productivityControl.getRawValue(),hardworking:this.hardworkingControl.getRawValue(),coworker:this.coworkerControl.getRawValue(),knowledge:this.knowledgeControl.getRawValue()}};this.actionSave.emit(e)}cancel(){this.actionCancel.emit()}setInfoAvatar(e){this.infoAvatar={title:`${e.info.name} ${e.info.lastName}`,description:`${e.info.email}`,modeRow:!0}}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=f({type:o,selectors:[["app-user-form"]],inputs:{userDetail:"userDetail",loading:"loading",error:"error"},outputs:{actionCancel:"actionCancel",actionSave:"actionSave"},decls:35,vars:17,consts:[[1,"user-form"],[1,"row"],[1,"col","d-flex","justify-content-center"],[3,"avatar"],[3,"submit","formGroup"],[1,"col-lg-6"],[3,"input"],[1,"col-lg-2","offset-lg-1"],[1,"col-lg-2"],[1,"row","mt-4"],[1,"col-6"],[1,"btn","btn-outline-light","w-100",3,"click","disabled"],[1,"bi","bi-box-arrow-left"],["type","submit",1,"btn","btn-outline-primary","w-100",3,"disabled"],[1,"bi","bi-floppy"],[1,"spinner-border","spinner-border-sm"]],template:function(i,t){i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),s(3,"app-avatar",3),a()(),n(4,"form",4),c("submit",function(){return t.saveUser()}),n(5,"div",1)(6,"div",5),s(7,"app-input-text",6)(8,"app-input-text",6)(9,"app-input-text",6),a(),n(10,"div",5),s(11,"app-input-text",6)(12,"app-input-date",6)(13,"app-input-text",6),a()(),n(14,"div",1)(15,"div",7),s(16,"app-input-number",6),a(),n(17,"div",8),s(18,"app-input-number",6),a(),n(19,"div",8),s(20,"app-input-number",6),a(),n(21,"div",8),s(22,"app-input-number",6),a(),n(23,"div",8),s(24,"app-input-number",6),a()(),n(25,"div",9)(26,"div",10)(27,"button",11),c("click",function(){return t.cancel()}),s(28,"i",12),m(29," Cancel "),a()(),n(30,"div",10)(31,"button",13),s(32,"i",14),m(33," Save "),I(34,nt,1,0,"span",15),a()()()()()),i&2&&(r(3),l("avatar",t.infoAvatar),r(),l("@fadeIn",void 0)("formGroup",t.formUser),r(3),l("input",t.inputName),r(),l("input",t.inputLastName),r(),l("input",t.inputEmail),r(2),l("input",t.inputPosition),r(),l("input",t.inputDate),r(),l("input",t.inputSalary),r(3),l("input",t.inputCoworker),r(2),l("input",t.inputHardworking),r(2),l("input",t.inputKnowledge),r(2),l("input",t.inputProactivity),r(2),l("input",t.inputProductivity),r(3),l("disabled",t.loading()),r(4),l("disabled",!t.formUser.valid||t.loading()),r(3),S(t.loading()?34:-1))},dependencies:[W,je,qe,Xe,Ye,fe,de,q],encapsulation:2,data:{animation:[P()]}})};var be=class o{store=_(A);router=_(k);userCreateLoading=g(this.store.select(e=>e.userCreate.loading),{initialValue:!1});userCreateError=g(this.store.select(e=>e.userCreate.error),{initialValue:null});userCreate=g(this.store.select(e=>e.userCreate.userDetail),{initialValue:null});userCreateSuccess=g(this.store.select(e=>e.userCreate.success),{initialValue:!1});effect=C(()=>{this.userCreateSuccess()&&this.router.navigate(["/users/detail",this.userCreate()?.info.email])});ngOnDestroy(){this.store.dispatch(we())}cancelCreation(){this.router.navigate(["/users"])}saveCreation(e){this.store.dispatch(we()),this.store.dispatch(Qe({userDetail:e}))}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=f({type:o,selectors:[["app-create"]],decls:3,vars:3,consts:[[1,"create"],[3,"actionCancel","actionSave","userDetail","loading","error"]],template:function(i,t){i&1&&(n(0,"div",0),s(1,"app-back-users"),n(2,"app-user-form",1),c("actionCancel",function(){return t.cancelCreation()})("actionSave",function(d){return t.saveCreation(d)}),a()()),i&2&&(r(2),l("userDetail",t.userCreate)("loading",t.userCreateLoading)("error",t.userCreateError))},dependencies:[H,G],encapsulation:2})};var ve=class o{boxInfo;static \u0275fac=function(i){return new(i||o)};static \u0275cmp=f({type:o,selectors:[["app-box-info"]],inputs:{boxInfo:"boxInfo"},decls:5,vars:9,consts:[[1,"box-info","text-start","rounded","p-2"],[1,"text-center"]],template:function(i,t){i&1&&(X(0,"div",0)(1,"h5"),m(2),$(),X(3,"h4",1),m(4),$()()),i&2&&(L("border border-"+t.boxInfo().color),r(),L("text-"+t.boxInfo().color),r(),w(t.boxInfo().label),r(),L("text-"+t.boxInfo().color),l("@fadeIn",void 0),r(),w(t.boxInfo().value))},encapsulation:2,data:{animation:[P()]}})};var ot=()=>[import("./chunk-WXGHBLHO.js").then(o=>o.ChartComponent)];function at(o,e){if(o&1&&s(0,"app-chart",13),o&2){let i=D();l("idChart","polar")("userDetail",i.userDetail)}}function rt(o,e){o&1&&s(0,"app-spinner")}var he=class o{userDetail;actionOpenModal=new y;actionEdit=new y;boxInfoPosition=u({color:"primary",label:"Position",value:""});boxInfoIncorporation=u({color:"secondary",label:"Incorporation",value:""});boxInfoSalary=u({color:"success",label:"Salary",value:0});infoAvatar;datePipe=_(K);currencyPipe=_(ye);effect=C(()=>{this.userDetail()&&(this.setBoxesInfo({position:this.userDetail().info.position,incorporation:this.userDetail().info.date,salary:this.userDetail().info.salary}),this.setInfoAvatar(this.userDetail()))});setBoxesInfo(e){this.boxInfoPosition.update(i=>h(v({},i),{value:e.position})),this.boxInfoIncorporation.update(i=>h(v({},i),{value:this.datePipe.transform(e.incorporation,"MM/dd/yyyy")})),this.boxInfoSalary.update(i=>h(v({},i),{value:this.currencyPipe.transform(e.salary,"USD","symbol","1.0-2")}))}setInfoAvatar(e){this.infoAvatar={title:`${e.info.name} ${e.info.lastName}`,description:`${e.info.email}`}}openModalDelete(){this.actionOpenModal.emit()}edit(){this.actionEdit.emit()}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=f({type:o,selectors:[["app-info"]],inputs:{userDetail:"userDetail"},outputs:{actionOpenModal:"actionOpenModal",actionEdit:"actionEdit"},features:[Re([K,ye])],decls:24,vars:4,consts:[[1,"info"],[1,"row"],[1,"col-xl-6"],[3,"avatar"],[1,"row","my-4"],[1,"col-6"],[1,"btn","btn-outline-primary","w-100",3,"click"],[1,"bi","bi-pencil"],[1,"btn","btn-outline-danger","w-100",3,"click"],[1,"bi","bi-x-circle"],[1,"mt-3"],[3,"boxInfo"],[1,"mt-3","mb-2"],[3,"idChart","userDetail"]],template:function(i,t){i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),s(3,"app-avatar",3),n(4,"div",4)(5,"div",5)(6,"button",6),c("click",function(){return t.edit()}),s(7,"i",7),m(8," Edit "),a()(),n(9,"div",5)(10,"button",8),c("click",function(){return t.openModalDelete()}),s(11,"i",9),m(12," Delete "),a()()(),n(13,"div",10),s(14,"app-box-info",11),a(),n(15,"div",10),s(16,"app-box-info",11),a(),n(17,"div",12),s(18,"app-box-info",11),a()(),n(19,"div",2),Ue(20,at,1,2)(21,rt,1,0),Ne(22,20,ot,null,21),Te(0,-1),a()()()),i&2&&(r(3),l("avatar",t.infoAvatar),r(11),l("boxInfo",t.boxInfoPosition),r(2),l("boxInfo",t.boxInfoIncorporation),r(2),l("boxInfo",t.boxInfoSalary))},dependencies:[ve,q,B],encapsulation:2})};function lt(o,e){o&1&&s(0,"span",11)}var j=class o{deleteUser;openModal=u(!1);deleteLoading;actionDelete=new y;cancelDeleting(){this.actionDelete.emit(!1)}confirmDeleting(){this.actionDelete.emit(!0)}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=f({type:o,selectors:[["app-modal-delete"]],inputs:{deleteUser:"deleteUser",openModal:"openModal",deleteLoading:"deleteLoading"},outputs:{actionDelete:"actionDelete"},decls:25,vars:7,consts:[[3,"visible"],["header","",1,"text-danger"],[1,"bi","bi-x-circle"],["body","",1,"text-center"],[1,"text-light"],[1,"text-secondary","fw-bold","me-2"],[1,"text-primary"],["footer",""],["type","button",1,"btn","btn-outline-light","me-4",3,"click","disabled"],[1,"bi","bi-box-arrow-left"],["type","button",1,"btn","btn-outline-danger",3,"click","disabled"],["aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(i,t){if(i&1&&(n(0,"app-modal",0)(1,"h3",1),s(2,"span",2),m(3," Delete user"),a(),n(4,"div",3)(5,"p",4),m(6,"Do you want to delete this user ?"),a(),n(7,"div")(8,"span",5),m(9,"User:"),a(),n(10,"span",6),m(11),a()(),n(12,"div")(13,"span",5),m(14,"Email:"),a(),n(15,"span",6),m(16),a()()(),n(17,"div",7)(18,"button",8),c("click",function(){return t.cancelDeleting()}),s(19,"i",9),m(20," Cancel "),a(),n(21,"button",10),c("click",function(){return t.confirmDeleting()}),s(22,"i",2),m(23," Delete "),I(24,lt,1,0,"span",11),a()()()),i&2){let p,d;l("visible",t.openModal),r(11),J("",(p=t.deleteUser())==null?null:p.name," ",(p=t.deleteUser())==null?null:p.lastName),r(5),w((d=t.deleteUser())==null?null:d.email),r(2),l("disabled",t.deleteLoading()),r(3),l("disabled",t.deleteLoading()),r(3),S(t.deleteLoading()?24:-1)}},dependencies:[He],encapsulation:2})};function st(o,e){o&1&&(n(0,"div",1),s(1,"app-spinner"),a())}function pt(o,e){if(o&1){let i=R();n(0,"app-user-form",5),c("actionCancel",function(){U(i);let p=D(3);return N(p.cancelEdition())})("actionSave",function(p){U(i);let d=D(3);return N(d.saveEdition(p))}),a()}if(o&2){let i=D(3);l("userDetail",i.userDetail)("loading",i.editLoading)("error",i.editError)}}function mt(o,e){if(o&1){let i=R();n(0,"app-info",6),c("actionOpenModal",function(){U(i);let p=D(3);return N(p.openModalDelete())})("actionEdit",function(){U(i);let p=D(3);return N(p.modeEdit.set(!0))}),a()}if(o&2){let i=D(3);l("userDetail",i.userDetail)}}function ct(o,e){if(o&1&&(s(0,"app-back-users"),I(1,pt,1,3,"app-user-form",3)(2,mt,1,1,"app-info",4)),o&2){let i=D(2);r(),S(i.modeEdit()?1:2)}}function dt(o,e){if(o&1&&I(0,ct,3,1),o&2){let i=D();S(i.userDetail()?0:-1)}}var Ce=class o{openModal=u(!1);modeEdit=u(!1);newEmail="";store=_(A);route=_(We);router=_(k);userDetail=g(this.store.select(e=>e.userDetail.userDetail),{initialValue:null});userDetailLoading=g(this.store.select(e=>e.userDetail.loading),{initialValue:!1});userDetailError=g(this.store.select(e=>e.userDetail.error),{initialValue:null});deleteUser=g(this.store.select(e=>e.userDelete.user),{initialValue:null});deleteSuccess=g(this.store.select(e=>e.userDelete.success),{initialValue:!1});deleteError=g(this.store.select(e=>e.userDelete.error),{initialValue:null});deleteLoading=g(this.store.select(e=>e.userDelete.loading),{initialValue:!1});editSuccess=g(this.store.select(e=>e.userEdit.success),{initialValue:!1});editLoading=g(this.store.select(e=>e.userEdit.loading),{initialValue:!1});editError=g(this.store.select(e=>e.userEdit.error),{initialValue:null});deleteSuccessEffect=C(()=>{this.deleteSuccess()&&(this.router.navigate(["/users"]),this.store.dispatch(T()))});deleteErrorEffect=C(()=>{this.deleteError()&&this.openModal.set(!1)});editSuccessEffect=C(()=>{this.editSuccess()&&(this.store.dispatch(ce()),this.modeEdit.set(!1),this.store.dispatch(Me({email:this.newEmail})))});ngOnInit(){this.route.paramMap.subscribe(e=>{let i=e.get("id");this.store.dispatch(Me({email:i}))})}ngOnDestroy(){this.store.dispatch(ze()),this.store.dispatch(ce()),this.store.dispatch(T())}openModalDelete(){this.store.dispatch(T()),this.openModal.set(!0);let e=this.userDetail().info;this.store.dispatch(pe({user:e}))}actionModalDelete(e){e?this.store.dispatch(me()):(this.openModal.set(!1),this.store.dispatch(T()))}cancelEdition(){this.modeEdit.set(!1)}saveEdition(e){this.store.dispatch(ce()),this.newEmail=e.info.email,this.store.dispatch(Je({oldEmail:this.userDetail().info.email,userDetail:e}))}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=f({type:o,selectors:[["app-detail"]],decls:4,vars:4,consts:[[1,"detail"],[1,"mt-5"],[3,"actionDelete","openModal","deleteLoading","deleteUser"],[3,"userDetail","loading","error"],[3,"userDetail"],[3,"actionCancel","actionSave","userDetail","loading","error"],[3,"actionOpenModal","actionEdit","userDetail"]],template:function(i,t){i&1&&(n(0,"div",0),I(1,st,2,0,"div",1)(2,dt,1,1),a(),n(3,"app-modal-delete",2),c("actionDelete",function(d){return t.actionModalDelete(d)}),a()),i&2&&(r(),S(t.userDetailLoading()?1:2),r(2),l("openModal",t.openModal)("deleteLoading",t.deleteLoading)("deleteUser",t.deleteUser))},dependencies:[he,B,j,G,ae,H],encapsulation:2})};var _e=class o{search;actionSearch=new y;searchText=u("");delaySearch=400;router=_(k);subscription=oe(this.searchText).pipe(Y(this.delaySearch),z(1),ne()).subscribe(e=>{this.actionSearch.emit(e)});effect=C(()=>{this.searchText.set(this.search())});deleteSearch(){this.searchText.set("")}createUser(){this.router.navigate(["/users/create"])}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=f({type:o,selectors:[["app-search"]],inputs:{search:"search"},outputs:{actionSearch:"actionSearch"},decls:9,vars:2,consts:[[1,"search"],[1,"input-group","mb-1"],["id","basic-addon1",1,"input-group-text"],[1,"bi","bi-search"],["type","text","name","search","placeholder","Search users",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-outline-secondary",3,"click","disabled"],[1,"bi","bi-x-circle"],[1,"btn","btn-outline-primary",3,"click"],[1,"bi","bi-person-plus"]],template:function(i,t){i&1&&(n(0,"div",0)(1,"div",1)(2,"span",2),s(3,"i",3),a(),n(4,"input",4),ee("ngModelChange",function(d){return Z(t.searchText,d)||(t.searchText=d),d}),a(),n(5,"button",5),c("click",function(){return t.deleteSearch()}),s(6,"i",6),a(),n(7,"button",7),c("click",function(){return t.createUser()}),s(8,"i",8),a()()()),i&2&&(r(4),Q("ngModel",t.searchText),r(),l("disabled",!t.searchText()))},dependencies:[se,F,V,re],encapsulation:2})};function ut(o,e){o&1&&(n(0,"div",2),s(1,"app-spinner"),a())}function ft(o,e){if(o&1){let i=R();n(0,"tr",12),c("click",function(){let p=U(i).$implicit,d=D();return N(d.userDetail(p.email))}),n(1,"td",4),m(2),a(),n(3,"td"),m(4),a(),n(5,"td"),m(6),te(7,"date"),a(),n(8,"td",4),m(9),a(),n(10,"td")(11,"i",13),c("click",function(p){let d=U(i).$implicit,Ze=D();return N(Ze.openModalDelete(d,p))}),a()()()}if(o&2){let i=e.$implicit;l("@fadeIn",void 0),r(2),J("",i.name," ",i.lastName),r(2),O(" ",i.email," "),r(2),O(" ",ie(7,6,i.date,"MM/dd/yyyy")," "),r(3),O(" ",i.position," ")}}function gt(o,e){o&1&&(n(0,"tr")(1,"td",14),m(2,"No users found"),a()())}var De=class o{users;loading;currentPage;totalPages;actionDeleteUser=new y;actionChangePage=new y;page=u(1);delayPagination=200;router=_(k);effect=C(()=>{this.page.set(this.currentPage())});subscription=oe(this.page).pipe(Y(this.delayPagination),z(1),xe(()=>this.page()>0),ne()).subscribe(e=>this.actionChangePage.emit(e));userDetail(e){this.router.navigate(["users/detail/",e])}openModalDelete(e,i){i.stopPropagation(),this.actionDeleteUser.emit(e)}changePage(e){e>this.totalPages()&&(e=this.totalPages()),this.page.set(e)}nextPage(){this.page()||this.page.set(0),this.page.update(e=>e+1)}previousPage(){this.page.update(e=>e-1)}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=f({type:o,selectors:[["app-table"]],inputs:{users:"users",loading:"loading",currentPage:"currentPage",totalPages:"totalPages"},outputs:{actionDeleteUser:"actionDeleteUser",actionChangePage:"actionChangePage"},decls:28,vars:9,consts:[[1,"app-table","text-start","table-responsive"],[1,"app-table__content","table-responsive"],[1,"app-table__content__loading"],[1,"table","table-hover"],[1,"text-nowrap"],[1,"app-table__pagination","d-flex","justify-content-center","mt-1"],[1,"input-group","app-table__pagination__content"],["type","button",1,"btn","btn-outline-secondary",3,"click","disabled"],[1,"bi","bi-chevron-left"],["name","pagination","type","text",1,"form-control",3,"ngModelChange","mask","min","max","ngModel"],["id","basic-addon2",1,"input-group-text"],[1,"bi","bi-chevron-right"],[3,"click"],["tabindex","0","role","button","aria-label","delete user",1,"text-danger","bi","bi-x-circle","fs-5",3,"click"],["colspan","5",2,"text-align","center"]],template:function(i,t){i&1&&(n(0,"div",0)(1,"div",1),I(2,ut,2,0,"div",2),n(3,"table",3)(4,"thead")(5,"tr")(6,"th",4),m(7,"Full Name"),a(),n(8,"th"),m(9,"Email"),a(),n(10,"th"),m(11,"Incorporation"),a(),n(12,"th"),m(13,"Position"),a(),s(14,"th"),a()(),n(15,"tbody"),Pe(16,ft,12,9,"tr",null,ke),I(18,gt,3,0,"tr"),a()()(),n(19,"div",5)(20,"div",6)(21,"button",7),c("click",function(){return t.previousPage()}),s(22,"i",8),a(),n(23,"input",9),ee("ngModelChange",function(d){return Z(t.page,d)||(t.page=d),d}),c("ngModelChange",function(d){return t.changePage(d)}),a(),n(24,"span",10),m(25),a(),n(26,"button",7),c("click",function(){return t.nextPage()}),s(27,"i",11),a()()()()),i&2&&(r(2),S(t.loading()?2:-1),r(14),Fe(t.users()),r(2),S(t.users().length===0&&!t.loading()?18:-1),r(3),l("disabled",t.page()<=1),r(2),l("mask","09")("min",1)("max",t.totalPages()),Q("ngModel",t.page),r(2),O("/ ",t.totalPages()),r(),l("disabled",t.page()>=t.totalPages()))},dependencies:[se,F,V,re,$e,B,K],styles:[".app-table__content[_ngcontent-%COMP%]{min-height:28.8rem;position:relative}.app-table__content__loading[_ngcontent-%COMP%]{left:50%;position:absolute;top:50%;transform:translate(-50%,-50%)}.app-table__pagination__content[_ngcontent-%COMP%]{max-width:13rem}"],data:{animation:[P(500)]}})};var Ie=class o{users=u([]);params=u(null);startDelete;openModal=u(!1);numberRows=10;store=_(A);usersFromStore=g(this.store.select(e=>e.users.users),{initialValue:[]});totalPages=g(this.store.select(e=>e.users.totalPages),{initialValue:0});search=g(this.store.select(e=>e.users.search),{initialValue:""});currentPage=g(this.store.select(e=>e.users.page),{initialValue:1});loadingUsers=g(this.store.select(e=>e.users.loading),{initialValue:!1});deleteUser=g(this.store.select(e=>e.userDelete.user),{initialValue:null});deleteLoading=g(this.store.select(e=>e.userDelete.loading),{initialValue:!1});successDelete=g(this.store.select(e=>e.userDelete.success),{initialValue:!1});errorDelete=g(this.store.select(e=>e.userDelete.error),{initialValue:null});usersEffect=C(()=>{this.users.set(this.usersFromStore())});successDeleteEffect=C(()=>{this.successDelete()&&(this.openModal.set(!1),this.store.dispatch(T()),this.store.dispatch(Ee(this.params())))});errorDeleteEffect=C(()=>{this.errorDelete()&&this.openModal.set(!1)});paramsEffect=C(()=>{this.params()&&this.store.dispatch(Ee(this.params()))});ngOnInit(){this.params.set({number:this.numberRows,search:this.search(),page:this.currentPage()})}ngOnDestroy(){this.store.dispatch(T())}openModalDelete(e){this.store.dispatch(T()),this.openModal.set(!0),this.store.dispatch(pe({user:e}))}actionModalDelete(e){e?this.store.dispatch(me()):(this.openModal.set(!1),this.store.dispatch(T()))}changePage(e){this.params.update(()=>h(v({},this.params()),{page:e}))}searchUsers(e){this.params.update(()=>h(v({},this.params()),{search:e,page:1}))}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=f({type:o,selectors:[["app-list"]],decls:4,vars:8,consts:[[1,"list"],[3,"actionSearch","search"],[3,"actionChangePage","actionDeleteUser","users","loading","currentPage","totalPages"],[3,"actionDelete","openModal","deleteLoading","deleteUser"]],template:function(i,t){i&1&&(n(0,"div",0)(1,"app-search",1),c("actionSearch",function(d){return t.searchUsers(d)}),a(),n(2,"app-table",2),c("actionChangePage",function(d){return t.changePage(d)})("actionDeleteUser",function(d){return t.openModalDelete(d)}),a()(),n(3,"app-modal-delete",3),c("actionDelete",function(d){return t.actionModalDelete(d)}),a()),i&2&&(r(),l("search",t.search),r(),l("users",t.users)("loading",t.loadingUsers)("currentPage",t.currentPage)("totalPages",t.totalPages),r(),l("openModal",t.openModal)("deleteLoading",t.deleteLoading)("deleteUser",t.deleteUser))},dependencies:[De,_e,j],encapsulation:2})};var Ln=[{path:"",component:Ie},{path:"detail/:id",component:Ce},{path:"create",component:be}];export{Ln as USERS_ROUTES};
