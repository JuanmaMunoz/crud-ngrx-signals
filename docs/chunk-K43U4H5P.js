import{a as qe,b as we,f as me,g as ce,j as T,k as Me,n as Je,o as Qe,r as ue,s as Ze,v as xe}from"./chunk-RDDA5RWH.js";import{a as H,c as Ye,d as ze}from"./chunk-H4GLEW6A.js";import{G as W,K as F,L as b,M as R,N as je,O as Ge,P as x,Q as le,R as Xe,S as se,T as $e,U as pe,V as B,X as Ke,a as Oe,d as O,e as oe,f as We,l as re,m as g,n as Be,p as N,q as He,t as ae}from"./chunk-FRNRR4E7.js";import{h as k}from"./chunk-DXSAKXGW.js";import{$b as Le,Ab as n,Bb as r,Cb as p,Db as $,E as Ue,Eb as K,Fb as Ve,Gb as V,H as z,Kb as c,Mb as S,Ra as a,Sb as Ee,Tb as A,Ub as m,Vb as M,Wa as y,Wb as L,Xb as Q,Y as J,Yb as Z,Zb as ee,_b as te,a as h,ab as _,ac as Ae,b as v,bc as ie,cc as ne,e as Y,fb as f,ic as C,lb as Pe,qa as U,ra as P,rb as Te,sb as Ne,ub as D,vb as I,wb as ke,xb as Fe,yb as Re,za as d,zb as s}from"./chunk-EKF2N2UE.js";var q=class o{static \u0275fac=function(t){return new(t||o)};static \u0275cmp=f({type:o,selectors:[["app-back-users"]],decls:4,vars:1,consts:[[1,"back-users"],[3,"routerLink"],[1,"bi","bi-arrow-left-short"]],template:function(t,e){t&1&&(n(0,"div",0)(1,"a",1),p(2,"i",2),m(3," Back to users "),r()()),t&2&&(a(),s("routerLink","/users"))},dependencies:[ae,He],styles:[".back-users[_ngcontent-%COMP%]{position:relative}.back-users[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{color:var(--bs-primary);cursor:pointer;left:0rem;position:absolute;text-decoration:none;top:-1rem}.back-users[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{color:var(--bs-secondary)}"]})};var nt=(o,i)=>({"is-invalid":o,"is-valid":i});function ot(o,i){if(o&1){let t=V();n(0,"button",7),c("click",function(){U(t);let l=S();return P(l.reset())}),p(1,"i",8),r()}}function rt(o,i){o&1&&(n(0,"span",5),p(1,"i",9),r())}var fe=class o{input;userAgent=window.navigator.userAgent;control;ngOnInit(){this.control=this.input().control}reset(){this.control.setValue("")}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=f({type:o,selectors:[["app-input-date"]],inputs:{input:"input"},decls:10,vars:15,consts:[[1,"input-date","mb-3"],[1,"form-label","text-secondary","fw-bold",3,"for"],[1,"input-group"],["onkeydown","return false","lang","en-US","type","date","autocomplete","off",1,"form-control",3,"id","placeholder","formControl","ngClass"],["type","button",1,"btn","btn-outline-secondary"],[1,"input-group-text"],[1,"invalid-feedback"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-x-circle"],[1,"bi","bi-calendar"]],template:function(t,e){t&1&&(n(0,"div",0)(1,"label",1),m(2),r(),n(3,"div",2),p(4,"input",3),D(5,ot,2,0,"button",4),D(6,rt,2,0,"span",5),n(7,"div",6),m(8),ie(9,"validationErrors"),r()()()),t&2&&(a(),s("for",e.input().label),a(),M(e.input().label),a(2),s("id",e.input().label)("placeholder",e.input().placeholder)("formControl",e.input().control)("ngClass",Ae(12,nt,e.input().control.errors,e.input().control.value&&e.input().control.valid)),a(),I(e.input().control.value?5:-1),a(),I(!e.input().control.value&&!e.userAgent.toLocaleLowerCase().includes("firefox")?6:-1),a(2),L(" ",ne(9,9,e.input().control.errors,e.input().validationErrors)," "))},dependencies:[We,Oe,B,F,R,se,Ye],encapsulation:2})};var be=class o{input;control;ngOnInit(){this.control=this.input().control,this.control.disable()}increase(){this.control.value<this.input().max&&this.control.setValue(this.control.value+1)}decrease(){this.control.value>this.input().min&&this.control.setValue(this.control.value-1)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=f({type:o,selectors:[["app-input-number"]],inputs:{input:"input"},decls:9,vars:7,consts:[[1,"input-number","mb-3"],[1,"form-label","text-secondary","fw-bold",3,"for"],[1,"input-group","app-table__pagination__content"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-chevron-left"],["autocomplete","off",1,"form-control",3,"placeholder","formControl","id","min","max"],[1,"bi","bi-chevron-right"]],template:function(t,e){t&1&&(n(0,"div",0)(1,"label",1),m(2),r(),n(3,"div",2)(4,"button",3),c("click",function(){return e.decrease()}),p(5,"i",4),r(),p(6,"input",5),n(7,"button",3),c("click",function(){return e.increase()}),p(8,"i",6),r()()()),t&2&&(a(),s("for",e.input().label),a(),M(e.input().label),a(4),s("placeholder",e.input().placeholder)("formControl",e.input().control)("id",e.input().label)("min",e.input().min)("max",e.input().max))},dependencies:[B,F,R,se],encapsulation:2})};var he=class o{static \u0275fac=function(t){return new(t||o)};static \u0275cmp=f({type:o,selectors:[["app-img"]],decls:3,vars:0,consts:[[1,"img"],[1,"text-secondary","my-0"],[1,"bi","bi-person-circle"]],template:function(t,e){t&1&&($(0,"div",0)(1,"h2",1),Ve(2,"i",2),K()())},styles:[".img[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%]{font-size:5rem;line-height:0}"]})};var j=class o{avatar={title:"New User",description:"Insert new user in the system",modeRow:!0};static \u0275fac=function(t){return new(t||o)};static \u0275cmp=f({type:o,selectors:[["app-avatar"]],inputs:{avatar:"avatar"},decls:8,vars:11,consts:[[1,"avatar"],[1,"text-primary"],[1,"text-light"]],template:function(t,e){t&1&&(n(0,"div",0)(1,"div"),p(2,"app-img"),r(),n(3,"div")(4,"h4",1),m(5),r(),n(6,"h5",2),m(7),r()()()),t&2&&(A(e.avatar.modeRow?"text-lg-start text-center":"text-center"),Ee("d-lg-flex",e.avatar.modeRow)("align-items-center",e.avatar.modeRow),s("@fadeIn",void 0),a(3),Ee("ms-lg-3",e.avatar.modeRow),a(2),M(e.avatar.title),a(2),M(e.avatar.description))},dependencies:[he],encapsulation:2,data:{animation:[k(500)]}})};function at(o,i){o&1&&p(0,"span",15)}var G=class o{userDetail;loading;error;actionCancel=new y;actionSave=new y;formUser;nameControl;lastNameControl;emailControl;dateControl;positionControl;salaryControl;coworkerControl;hardworkingControl;knowledgeControl;proactivityControl;productivityControl;validationErrors={required:"The field is required",minlength:"The min length is 2",maxlength:"The max length is 50",emailExist:"The email is already in use.",min:"The min value is 600",max:"The max value is $100,000",email:"The email format is invalid"};infoAvatar={title:"New User",description:"Insert new user in the system",modeRow:!0};inputName=d({type:"text",control:{},placeholder:"Insert name",label:"Name",validationErrors:this.validationErrors,focus:!0});inputLastName=d({type:"text",control:{},placeholder:"Insert lastname",label:"Lastname",validationErrors:this.validationErrors});inputEmail=d({type:"text",control:{},placeholder:"Insert email",label:"Email",validationErrors:this.validationErrors});inputDate=d({type:"text",control:{},placeholder:"Insert date",label:"Incorporation date",validationErrors:this.validationErrors});inputPosition=d({type:"text",control:{},placeholder:"Insert position",label:"Position",validationErrors:this.validationErrors});inputSalary=d({type:"text",control:{},placeholder:"Insert salary",label:"Salary",validationErrors:this.validationErrors,mask:"separator.2"});inputCoworker=d({type:"number",control:{},placeholder:"Insert coworker",label:"Coworker",validationErrors:this.validationErrors,min:1,max:10});inputHardworking=d({type:"number",control:{},placeholder:"Insert hardworking",label:"Hardworking",validationErrors:this.validationErrors,min:1,max:10});inputKnowledge=d({type:"number",control:{},placeholder:"Insert knowledge",label:"Knowledge",validationErrors:this.validationErrors,min:1,max:10});inputProactivity=d({type:"number",control:{},placeholder:"Insert proactivity",label:"Proactivity",validationErrors:this.validationErrors,min:1,max:10});inputProductivity=d({type:"number",control:{},placeholder:"Insert productivity",label:"Productivity",validationErrors:this.validationErrors,min:1,max:10});constructor(){C(()=>{this.error()&&this.error()?.error.code==="USER_EMAIL_ALREADY_EXISTS"&&this.emailControl.setErrors({emailExist:"error"})})}ngOnInit(){this.loadForm(),this.userDetail()&&this.setInfoAvatar(this.userDetail())}loadForm(){this.formUser=new Ge({name:new x(this.userDetail()?.info.name??"",[b.required,b.minLength(2),b.maxLength(50)]),lastName:new x(this.userDetail()?.info.lastName??"",[b.required,b.minLength(2),b.maxLength(50)]),email:new x(this.userDetail()?.info.email??"",[b.required,b.email]),date:new x(this.userDetail()?.info.date?new Date(this.userDetail()?.info.date).toISOString().split("T")[0]:"",[b.required]),position:new x(this.userDetail()?.info.position??"",[b.required,b.minLength(2),b.maxLength(50)]),salary:new x(this.userDetail()?.info.salary??"",[b.required,b.min(600),b.max(1e5)]),coworker:new x(this.userDetail()?.statistics.coworker??5,[b.required]),hardworking:new x(this.userDetail()?.statistics.hardworking??5,[b.required]),knowledge:new x(this.userDetail()?.statistics.knowledge??5,[b.required]),proactivity:new x(this.userDetail()?.statistics.proactivity??5,[b.required]),productivity:new x(this.userDetail()?.statistics.productivity??5,[b.required])}),this.nameControl=this.formUser.get("name"),this.lastNameControl=this.formUser.get("lastName"),this.emailControl=this.formUser.get("email"),this.dateControl=this.formUser.get("date"),this.positionControl=this.formUser.get("position"),this.salaryControl=this.formUser.get("salary"),this.coworkerControl=this.formUser.get("coworker"),this.hardworkingControl=this.formUser.get("hardworking"),this.knowledgeControl=this.formUser.get("knowledge"),this.proactivityControl=this.formUser.get("proactivity"),this.productivityControl=this.formUser.get("productivity"),this.inputName.update(i=>v(h({},i),{control:this.nameControl})),this.inputLastName.update(i=>v(h({},i),{control:this.lastNameControl})),this.inputEmail.update(i=>v(h({},i),{control:this.emailControl})),this.inputDate.update(i=>v(h({},i),{control:this.dateControl})),this.inputPosition.update(i=>v(h({},i),{control:this.positionControl})),this.inputSalary.update(i=>v(h({},i),{control:this.salaryControl})),this.inputCoworker.update(i=>v(h({},i),{control:this.coworkerControl})),this.inputHardworking.update(i=>v(h({},i),{control:this.hardworkingControl})),this.inputKnowledge.update(i=>v(h({},i),{control:this.knowledgeControl})),this.inputProactivity.update(i=>v(h({},i),{control:this.proactivityControl})),this.inputProductivity.update(i=>v(h({},i),{control:this.productivityControl}))}saveUser(){let i={info:{name:this.nameControl.getRawValue(),lastName:this.lastNameControl.getRawValue(),position:this.positionControl.getRawValue(),date:new Date(this.dateControl.getRawValue()).getTime(),salary:this.salaryControl.getRawValue(),email:this.emailControl.getRawValue()},statistics:{email:this.emailControl.getRawValue(),proactivity:this.proactivityControl.getRawValue(),productivity:this.productivityControl.getRawValue(),hardworking:this.hardworkingControl.getRawValue(),coworker:this.coworkerControl.getRawValue(),knowledge:this.knowledgeControl.getRawValue()}};this.actionSave.emit(i)}cancel(){this.actionCancel.emit()}setInfoAvatar(i){this.infoAvatar={title:`${i.info.name} ${i.info.lastName}`,description:`${i.info.email}`,modeRow:!0}}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=f({type:o,selectors:[["app-user-form"]],inputs:{userDetail:"userDetail",loading:"loading",error:"error"},outputs:{actionCancel:"actionCancel",actionSave:"actionSave"},decls:35,vars:17,consts:[[1,"user-form"],[1,"row"],[1,"col","d-flex","justify-content-center"],[3,"avatar"],[3,"submit","formGroup"],[1,"col-lg-6"],[3,"input"],[1,"col-lg-2","offset-lg-1"],[1,"col-lg-2"],[1,"row","mt-4"],[1,"col-6"],[1,"btn","btn-outline-light","w-100",3,"click","disabled"],[1,"bi","bi-box-arrow-left"],["type","submit",1,"btn","btn-outline-primary","w-100",3,"disabled"],[1,"bi","bi-floppy"],[1,"spinner-border","spinner-border-sm"]],template:function(t,e){t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),p(3,"app-avatar",3),r()(),n(4,"form",4),c("submit",function(){return e.saveUser()}),n(5,"div",1)(6,"div",5),p(7,"app-input-text",6)(8,"app-input-text",6)(9,"app-input-text",6),r(),n(10,"div",5),p(11,"app-input-text",6)(12,"app-input-date",6)(13,"app-input-text",6),r()(),n(14,"div",1)(15,"div",7),p(16,"app-input-number",6),r(),n(17,"div",8),p(18,"app-input-number",6),r(),n(19,"div",8),p(20,"app-input-number",6),r(),n(21,"div",8),p(22,"app-input-number",6),r(),n(23,"div",8),p(24,"app-input-number",6),r()(),n(25,"div",9)(26,"div",10)(27,"button",11),c("click",function(){return e.cancel()}),p(28,"i",12),m(29," Cancel "),r()(),n(30,"div",10)(31,"button",13),p(32,"i",14),m(33," Save "),D(34,at,1,0,"span",15),r()()()()()),t&2&&(a(3),s("avatar",e.infoAvatar),a(),s("@fadeIn",void 0)("formGroup",e.formUser),a(3),s("input",e.inputName),a(),s("input",e.inputLastName),a(),s("input",e.inputEmail),a(2),s("input",e.inputPosition),a(),s("input",e.inputDate),a(),s("input",e.inputSalary),a(3),s("input",e.inputCoworker),a(2),s("input",e.inputHardworking),a(2),s("input",e.inputKnowledge),a(2),s("input",e.inputProactivity),a(2),s("input",e.inputProductivity),a(3),s("disabled",e.loading()),a(4),s("disabled",!e.formUser.valid||e.loading()),a(3),I(e.loading()?34:-1))},dependencies:[B,Xe,je,$e,ze,be,fe,j],encapsulation:2,data:{animation:[k()]}})};var ve=class o{constructor(i,t){this.store=i;this.router=t;this.userCreateLoading=g(this.store.select(e=>e.userCreate.loading),{initialValue:!1}),this.userCreateError=g(this.store.select(e=>e.userCreate.error),{initialValue:null}),this.userCreate=g(this.store.select(e=>e.userCreate.userDetail),{initialValue:null}),this.userCreateSuccess=g(this.store.select(e=>e.userCreate.success),{initialValue:!1}),C(()=>{this.userCreateSuccess()&&this.router.navigate(["/users/detail",this.userCreate()?.info.email])})}userCreate;userCreateError;userCreateLoading;userCreateSuccess;ngOnDestroy(){this.store.dispatch(xe())}cancelCreation(){this.router.navigate(["/users"])}saveCreation(i){this.store.dispatch(xe()),this.store.dispatch(Ze({userDetail:i}))}static \u0275fac=function(t){return new(t||o)(_(W),_(N))};static \u0275cmp=f({type:o,selectors:[["app-create"]],decls:3,vars:3,consts:[[1,"create"],[3,"actionCancel","actionSave","userDetail","loading","error"]],template:function(t,e){t&1&&(n(0,"div",0),p(1,"app-back-users"),n(2,"app-user-form",1),c("actionCancel",function(){return e.cancelCreation()})("actionSave",function(u){return e.saveCreation(u)}),r()()),t&2&&(a(2),s("userDetail",e.userCreate)("loading",e.userCreateLoading)("error",e.userCreateError))},dependencies:[q,G],encapsulation:2})};var Ce=class o{boxInfo;static \u0275fac=function(t){return new(t||o)};static \u0275cmp=f({type:o,selectors:[["app-box-info"]],inputs:{boxInfo:"boxInfo"},decls:5,vars:9,consts:[[1,"box-info","text-start","rounded","p-2"],[1,"text-center"]],template:function(t,e){t&1&&($(0,"div",0)(1,"h5"),m(2),K(),$(3,"h4",1),m(4),K()()),t&2&&(A("border border-"+e.boxInfo().color),a(),A("text-"+e.boxInfo().color),a(),M(e.boxInfo().label),a(),A("text-"+e.boxInfo().color),s("@fadeIn",void 0),a(),M(e.boxInfo().value))},encapsulation:2,data:{animation:[k()]}})};var lt=()=>[import("./chunk-EM4YTPH4.js").then(o=>o.ChartComponent)];function st(o,i){if(o&1&&p(0,"app-chart",13),o&2){let t=S();s("idChart","polar")("userDetail",t.userDetail)}}function pt(o,i){o&1&&p(0,"app-spinner")}var _e=class o{constructor(i,t){this.datePipe=i;this.currencyPipe=t;C(()=>{this.userDetail()&&(this.setBoxesInfo({position:this.userDetail()?.info.position,incorporation:this.userDetail()?.info.date,salary:this.userDetail()?.info.salary}),this.setInfoAvatar(this.userDetail()))})}userDetail;actionOpenModal=new y;actionEdit=new y;boxInfoPosition=d({color:"primary",label:"Position",value:""});boxInfoIncorporation=d({color:"secondary",label:"Incorporation",value:""});boxInfoSalary=d({color:"success",label:"Salary",value:0});infoAvatar;setBoxesInfo(i){this.boxInfoPosition.update(t=>v(h({},t),{value:i.position})),this.boxInfoIncorporation.update(t=>v(h({},t),{value:this.datePipe.transform(i.incorporation,"MM/dd/yyyy")})),this.boxInfoSalary.update(t=>v(h({},t),{value:this.currencyPipe.transform(i.salary,"USD","symbol","1.0-2")}))}setInfoAvatar(i){this.infoAvatar={title:`${i.info.name} ${i.info.lastName}`,description:`${i.info.email}`}}openModalDelete(){this.actionOpenModal.emit()}edit(){this.actionEdit.emit()}static \u0275fac=function(t){return new(t||o)(_(O),_(oe))};static \u0275cmp=f({type:o,selectors:[["app-info"]],inputs:{userDetail:"userDetail"},outputs:{actionOpenModal:"actionOpenModal",actionEdit:"actionEdit"},features:[Le([O,oe])],decls:24,vars:4,consts:[[1,"info"],[1,"row"],[1,"col-xl-6"],[3,"avatar"],[1,"row","my-4"],[1,"col-6"],[1,"btn","btn-outline-primary","w-100",3,"click"],[1,"bi","bi-pencil"],[1,"btn","btn-outline-danger","w-100",3,"click"],[1,"bi","bi-x-circle"],[1,"mt-3"],[3,"boxInfo"],[1,"mt-3","mb-2"],[3,"idChart","userDetail"]],template:function(t,e){t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),p(3,"app-avatar",3),n(4,"div",4)(5,"div",5)(6,"button",6),c("click",function(){return e.edit()}),p(7,"i",7),m(8," Edit "),r()(),n(9,"div",5)(10,"button",8),c("click",function(){return e.openModalDelete()}),p(11,"i",9),m(12," Delete "),r()()(),n(13,"div",10),p(14,"app-box-info",11),r(),n(15,"div",10),p(16,"app-box-info",11),r(),n(17,"div",12),p(18,"app-box-info",11),r()(),n(19,"div",2),Pe(20,st,1,2)(21,pt,1,0),Te(22,20,lt,null,21),Ne(0,-1),r()()()),t&2&&(a(3),s("avatar",e.infoAvatar),a(11),s("boxInfo",e.boxInfoPosition),a(2),s("boxInfo",e.boxInfoIncorporation),a(2),s("boxInfo",e.boxInfoSalary))},dependencies:[Ce,j,H],encapsulation:2})};function mt(o,i){o&1&&p(0,"span",11)}var X=class o{deleteUser;openModal=d(!1);deleteLoading;actionDelete=new y;cancelDeleting(){this.actionDelete.emit(!1)}confirmDeleting(){this.actionDelete.emit(!0)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=f({type:o,selectors:[["app-modal-delete"]],inputs:{deleteUser:"deleteUser",openModal:"openModal",deleteLoading:"deleteLoading"},outputs:{actionDelete:"actionDelete"},decls:25,vars:7,consts:[[3,"visible"],["header","",1,"text-danger"],[1,"bi","bi-x-circle"],["body","",1,"text-center"],[1,"text-light"],[1,"text-secondary","fw-bold","me-2"],[1,"text-primary"],["footer",""],["type","button",1,"btn","btn-outline-light","me-4",3,"click","disabled"],[1,"bi","bi-box-arrow-left"],["type","button",1,"btn","btn-outline-danger",3,"click","disabled"],["aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(t,e){if(t&1&&(n(0,"app-modal",0)(1,"h3",1),p(2,"span",2),m(3," Delete user"),r(),n(4,"div",3)(5,"p",4),m(6,"Do you want to delete this user ?"),r(),n(7,"div")(8,"span",5),m(9,"User:"),r(),n(10,"span",6),m(11),r()(),n(12,"div")(13,"span",5),m(14,"Email:"),r(),n(15,"span",6),m(16),r()()(),n(17,"div",7)(18,"button",8),c("click",function(){return e.cancelDeleting()}),p(19,"i",9),m(20," Cancel "),r(),n(21,"button",10),c("click",function(){return e.confirmDeleting()}),p(22,"i",2),m(23," Delete "),D(24,mt,1,0,"span",11),r()()()),t&2){let l,u;s("visible",e.openModal),a(11),Q("",(l=e.deleteUser())==null?null:l.name," ",(l=e.deleteUser())==null?null:l.lastName),a(5),M((u=e.deleteUser())==null?null:u.email),a(2),s("disabled",e.deleteLoading()),a(3),s("disabled",e.deleteLoading()),a(3),I(e.deleteLoading()?24:-1)}},dependencies:[qe],encapsulation:2})};function ct(o,i){o&1&&(n(0,"div",1),p(1,"app-spinner"),r())}function ut(o,i){if(o&1){let t=V();n(0,"app-user-form",5),c("actionCancel",function(){U(t);let l=S(3);return P(l.cancelEdition())})("actionSave",function(l){U(t);let u=S(3);return P(u.saveEdition(l))}),r()}if(o&2){let t=S(3);s("userDetail",t.userDetail)("loading",t.editLoading)("error",t.editError)}}function dt(o,i){if(o&1){let t=V();n(0,"app-info",6),c("actionOpenModal",function(){U(t);let l=S(3);return P(l.openModalDelete())})("actionEdit",function(){U(t);let l=S(3);return P(l.modeEdit.set(!0))}),r()}if(o&2){let t=S(3);s("userDetail",t.userDetail)}}function ft(o,i){if(o&1&&(p(0,"app-back-users"),D(1,ut,1,3,"app-user-form",3)(2,dt,1,1,"app-info",4)),o&2){let t=S(2);a(),I(t.modeEdit()?1:2)}}function gt(o,i){if(o&1&&D(0,ft,3,1),o&2){let t=S();I(t.userDetail()?0:-1)}}var Se=class o{constructor(i,t,e){this.store=i;this.route=t;this.router=e;this.userDetail=g(this.store.select(l=>l.userDetail.userDetail),{initialValue:null}),this.userDetailLoading=g(this.store.select(l=>l.userDetail.loading),{initialValue:!1}),this.userDetailError=g(this.store.select(l=>l.userDetail.error),{initialValue:null}),this.deleteUser=g(this.store.select(l=>l.userDelete.user),{initialValue:null}),this.deleteSuccess=g(this.store.select(l=>l.userDelete.success),{initialValue:!1}),this.deleteError=g(this.store.select(l=>l.userDelete.error),{initialValue:null}),this.deleteLoading=g(this.store.select(l=>l.userDelete.loading),{initialValue:!1}),this.editSuccess=g(this.store.select(l=>l.userEdit.success),{initialValue:!1}),this.editLoading=g(this.store.select(l=>l.userEdit.loading),{initialValue:!1}),this.editError=g(this.store.select(l=>l.userEdit.error),{initialValue:null}),C(()=>{this.deleteSuccess()&&(this.router.navigate(["/users"]),this.store.dispatch(T()))}),C(()=>{this.deleteError()&&this.openModal.set(!1)}),C(()=>{this.editSuccess()&&(this.store.dispatch(ue()),this.modeEdit.set(!1),this.store.dispatch(Me({email:this.newEmail})))})}userDetail;userDetailLoading;userDetailError;deleteLoading;deleteSuccess;deleteError;deleteUser;openModal=d(!1);modeEdit=d(!1);editLoading;editSuccess;editError;newEmail="";ngOnInit(){this.route.paramMap.subscribe(i=>{let t=i.get("id");this.store.dispatch(Me({email:t}))})}ngOnDestroy(){this.store.dispatch(Je()),this.store.dispatch(ue()),this.store.dispatch(T())}openModalDelete(){this.store.dispatch(T()),this.openModal.set(!0);let i=this.userDetail()?.info;this.store.dispatch(me({user:i}))}actionModalDelete(i){i?this.store.dispatch(ce()):(this.openModal.set(!1),this.store.dispatch(T()))}cancelEdition(){this.modeEdit.set(!1)}saveEdition(i){this.store.dispatch(ue()),this.newEmail=i.info.email,this.store.dispatch(Qe({oldEmail:this.userDetail()?.info.email,userDetail:i}))}static \u0275fac=function(t){return new(t||o)(_(W),_(Be),_(N))};static \u0275cmp=f({type:o,selectors:[["app-detail"]],decls:4,vars:4,consts:[[1,"detail"],[1,"mt-5"],[3,"actionDelete","openModal","deleteLoading","deleteUser"],[3,"userDetail","loading","error"],[3,"userDetail"],[3,"actionCancel","actionSave","userDetail","loading","error"],[3,"actionOpenModal","actionEdit","userDetail"]],template:function(t,e){t&1&&(n(0,"div",0),D(1,ct,2,0,"div",1)(2,gt,1,1),r(),n(3,"app-modal-delete",2),c("actionDelete",function(u){return e.actionModalDelete(u)}),r()),t&2&&(a(),I(e.userDetailLoading()?1:2),a(2),s("openModal",e.openModal)("deleteLoading",e.deleteLoading)("deleteUser",e.deleteUser))},dependencies:[_e,H,X,G,ae,q],encapsulation:2})};var De=class o{constructor(i){this.router=i;this.subscription.add(re(this.searchText).pipe(z(this.delaySearch),J(1)).subscribe(t=>{this.actionSearch.emit(t)})),C(()=>{this.searchText.set(this.search())})}search;actionSearch=new y;searchText=d("");delaySearch=400;subscription=new Y;ngOnDestroy(){this.subscription.unsubscribe()}deleteSearch(){this.searchText.set("")}createUser(){this.router.navigate(["/users/create"])}static \u0275fac=function(t){return new(t||o)(_(N))};static \u0275cmp=f({type:o,selectors:[["app-search"]],inputs:{search:"search"},outputs:{actionSearch:"actionSearch"},decls:9,vars:2,consts:[[1,"search"],[1,"input-group","mb-1"],["id","basic-addon1",1,"input-group-text"],[1,"bi","bi-search"],["type","text","name","search","placeholder","Search users",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-outline-secondary",3,"click","disabled"],[1,"bi","bi-x-circle"],[1,"btn","btn-outline-primary",3,"click"],[1,"bi","bi-person-plus"]],template:function(t,e){t&1&&(n(0,"div",0)(1,"div",1)(2,"span",2),p(3,"i",3),r(),n(4,"input",4),te("ngModelChange",function(u){return ee(e.searchText,u)||(e.searchText=u),u}),r(),n(5,"button",5),c("click",function(){return e.deleteSearch()}),p(6,"i",6),r(),n(7,"button",7),c("click",function(){return e.createUser()}),p(8,"i",8),r()()()),t&2&&(a(4),Z("ngModel",e.searchText),a(),s("disabled",!e.searchText()))},dependencies:[pe,F,R,le],encapsulation:2})};function bt(o,i){o&1&&(n(0,"div",2),p(1,"app-spinner"),r())}function ht(o,i){if(o&1){let t=V();n(0,"tr",12),c("click",function(){let l=U(t).$implicit,u=S();return P(u.userDetail(l.email))}),n(1,"td",4),m(2),r(),n(3,"td"),m(4),r(),n(5,"td"),m(6),ie(7,"date"),r(),n(8,"td",4),m(9),r(),n(10,"td")(11,"i",13),c("click",function(l){let u=U(t).$implicit,tt=S();return P(tt.openModalDelete(u,l))}),r()()()}if(o&2){let t=i.$implicit;s("@fadeIn",void 0),a(2),Q("",t.name," ",t.lastName),a(2),L(" ",t.email," "),a(2),L(" ",ne(7,6,t.date,"MM/dd/yyyy")," "),a(3),L(" ",t.position," ")}}function vt(o,i){o&1&&(n(0,"tr")(1,"td",14),m(2,"No users found"),r()())}var Ie=class o{constructor(i){this.router=i;this.subscription.add(re(this.page).pipe(z(this.delayPagination),J(1),Ue(()=>this.page()>0)).subscribe(t=>this.actionChangePage.emit(t))),C(()=>{this.page.set(this.currentPage())})}users;loading;currentPage;totalPages;actionDeleteUser=new y;actionChangePage=new y;page=d(1);subscription=new Y;delayPagination=200;ngOnDestroy(){this.subscription.unsubscribe()}userDetail(i){this.router.navigate(["users/detail/",i])}openModalDelete(i,t){t.stopPropagation(),this.actionDeleteUser.emit(i)}changePage(i){i>this.totalPages()&&(i=this.totalPages()),this.page.set(i)}nextPage(){this.page()||this.page.set(0),this.page.update(i=>i+1)}previousPage(){this.page.update(i=>i-1)}static \u0275fac=function(t){return new(t||o)(_(N))};static \u0275cmp=f({type:o,selectors:[["app-table"]],inputs:{users:"users",loading:"loading",currentPage:"currentPage",totalPages:"totalPages"},outputs:{actionDeleteUser:"actionDeleteUser",actionChangePage:"actionChangePage"},decls:28,vars:9,consts:[[1,"app-table","text-start","table-responsive"],[1,"app-table__content","table-responsive"],[1,"app-table__content__loading"],[1,"table","table-hover"],[1,"text-nowrap"],[1,"app-table__pagination","d-flex","justify-content-center","mt-1"],[1,"input-group","app-table__pagination__content"],["type","button",1,"btn","btn-outline-secondary",3,"click","disabled"],[1,"bi","bi-chevron-left"],["name","pagination","type","text",1,"form-control",3,"ngModelChange","mask","min","max","ngModel"],["id","basic-addon2",1,"input-group-text"],[1,"bi","bi-chevron-right"],[3,"click"],[1,"text-danger","bi","bi-x-circle","fs-5",3,"click"],["colspan","5",2,"text-align","center"]],template:function(t,e){t&1&&(n(0,"div",0)(1,"div",1),D(2,bt,2,0,"div",2),n(3,"table",3)(4,"thead")(5,"tr")(6,"th",4),m(7,"Full Name"),r(),n(8,"th"),m(9,"Email"),r(),n(10,"th"),m(11,"Incorporation"),r(),n(12,"th"),m(13,"Position"),r(),p(14,"th"),r()(),n(15,"tbody"),Fe(16,ht,12,9,"tr",null,ke),D(18,vt,3,0,"tr"),r()()(),n(19,"div",5)(20,"div",6)(21,"button",7),c("click",function(){return e.previousPage()}),p(22,"i",8),r(),n(23,"input",9),te("ngModelChange",function(u){return ee(e.page,u)||(e.page=u),u}),c("ngModelChange",function(u){return e.changePage(u)}),r(),n(24,"span",10),m(25),r(),n(26,"button",7),c("click",function(){return e.nextPage()}),p(27,"i",11),r()()()()),t&2&&(a(2),I(e.loading()?2:-1),a(14),Re(e.users()),a(2),I(e.users().length===0&&!e.loading()?18:-1),a(3),s("disabled",e.page()<=1),a(2),s("mask","09")("min",1)("max",e.totalPages()),Z("ngModel",e.page),a(2),L("/ ",e.totalPages()),a(),s("disabled",e.page()>=e.totalPages()))},dependencies:[pe,F,R,le,Ke,H,O],styles:[".app-table__content[_ngcontent-%COMP%]{min-height:28.8rem;position:relative}.app-table__content__loading[_ngcontent-%COMP%]{left:50%;position:absolute;top:50%;transform:translate(-50%,-50%)}.app-table__pagination__content[_ngcontent-%COMP%]{max-width:13rem}"],data:{animation:[k(500)]}})};var ye=class o{constructor(i){this.store=i;this.usersFromStore=g(this.store.select(t=>t.users.users),{initialValue:[]}),this.totalPages=g(this.store.select(t=>t.users.totalPages),{initialValue:0}),this.search=g(this.store.select(t=>t.users.search),{initialValue:""}),this.currentPage=g(this.store.select(t=>t.users.page),{initialValue:1}),this.loadingUsers=g(this.store.select(t=>t.users.loading),{initialValue:!1}),this.deleteUser=g(this.store.select(t=>t.userDelete.user),{initialValue:null}),this.deleteLoading=g(this.store.select(t=>t.userDelete.loading),{initialValue:!1}),this.successDelete=g(this.store.select(t=>t.userDelete.success),{initialValue:!1}),this.errorDelete=g(this.store.select(t=>t.userDelete.error),{initialValue:null}),C(()=>{this.users.set(this.usersFromStore())}),C(()=>{this.successDelete()&&(this.openModal.set(!1),this.store.dispatch(T()),this.store.dispatch(we(this.params())))}),C(()=>{this.errorDelete()&&this.openModal.set(!1)}),C(()=>{this.params()&&this.store.dispatch(we(this.params()))})}usersFromStore;users=d([]);totalPages;params=d(null);currentPage;search;loadingUsers;deleteLoading;startDelete;deleteUser;successDelete;errorDelete;openModal=d(!1);numberRows=10;ngOnInit(){this.params.set({number:this.numberRows,search:this.search(),page:this.currentPage()})}ngOnDestroy(){this.store.dispatch(T())}openModalDelete(i){this.store.dispatch(T()),this.openModal.set(!0),this.store.dispatch(me({user:i}))}actionModalDelete(i){i?this.store.dispatch(ce()):(this.openModal.set(!1),this.store.dispatch(T()))}changePage(i){this.params.update(()=>v(h({},this.params()),{page:i}))}searchUsers(i){this.params.update(()=>v(h({},this.params()),{search:i,page:1}))}static \u0275fac=function(t){return new(t||o)(_(W))};static \u0275cmp=f({type:o,selectors:[["app-list"]],decls:4,vars:8,consts:[[1,"list"],[3,"actionSearch","search"],[3,"actionChangePage","actionDeleteUser","users","loading","currentPage","totalPages"],[3,"actionDelete","openModal","deleteLoading","deleteUser"]],template:function(t,e){t&1&&(n(0,"div",0)(1,"app-search",1),c("actionSearch",function(u){return e.searchUsers(u)}),r(),n(2,"app-table",2),c("actionChangePage",function(u){return e.changePage(u)})("actionDeleteUser",function(u){return e.openModalDelete(u)}),r()(),n(3,"app-modal-delete",3),c("actionDelete",function(u){return e.actionModalDelete(u)}),r()),t&2&&(a(),s("search",e.search),a(),s("users",e.users)("loading",e.loadingUsers)("currentPage",e.currentPage)("totalPages",e.totalPages),a(),s("openModal",e.openModal)("deleteLoading",e.deleteLoading)("deleteUser",e.deleteUser))},dependencies:[Ie,De,X],encapsulation:2})};var Un=[{path:"",component:ye},{path:"detail/:id",component:Se},{path:"create",component:ve}];export{Un as USERS_ROUTES};
